/* eslint-disable */
//prettier-ignore
module.exports = {
name: "@yarnpkg/plugin-tsconfig-workspaces",
factory: function (require) {
"use strict";var plugin=(()=>{var f=Object.defineProperty;var O=Object.getOwnPropertyDescriptor;var A=Object.getOwnPropertyNames;var D=Object.prototype.hasOwnProperty;var g=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(s,r)=>(typeof require<"u"?require:s)[r]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+t+'" is not supported')});var I=(t,s)=>{for(var r in s)f(t,r,{get:s[r],enumerable:!0})},$=(t,s,r,i)=>{if(s&&typeof s=="object"||typeof s=="function")for(let a of A(s))!D.call(t,a)&&a!==r&&f(t,a,{get:()=>s[a],enumerable:!(i=O(s,a))||i.enumerable});return t};var j=t=>$(f({},"__esModule",{value:!0}),t);var x={};I(x,{default:()=>u});var e=g("@yarnpkg/core"),n=g("@yarnpkg/fslib"),u={hooks:{async afterAllInstalled(t,{report:s}){await s.startTimerPromise("Sync workspaces",async()=>{let r=n.ppath.join(t.cwd,"tsconfig.json");if(!!await n.xfs.existsPromise(r))try{let i=await n.xfs.readFilePromise(r,"utf8").then(JSON.parse);if(!t.tryWorkspaceByCwd(t.cwd))return;let l=Object.keys(i.compilerOptions.paths??{});i.compilerOptions.paths={};let{paths:p}=i.compilerOptions,m=[];t.workspaces.filter(o=>o.cwd!==t.cwd&&o.manifest.name?.scope!=="private").forEach(({relativeCwd:o,manifest:{name:y,main:M,raw:{exports:w={}}}})=>{if(y){let c=e.structUtils.stringifyIdent(y);p[c]=[o];let P=Object.entries(w);l.includes(c)||m.push(c),P.forEach(([k,E])=>{let N=`${c}/${k.replaceAll("./","")}`;p[N]=[n.ppath.join(o,E)]})}});let d=Object.keys(p),h=l.filter(o=>!d.includes(o));m.forEach(o=>{s.reportInfo(e.MessageName.UNNAMED,e.formatUtils.pretty(t.configuration,`+ ${o}`,"ADDED"))}),h.forEach(o=>{s.reportInfo(e.MessageName.UNNAMED,e.formatUtils.pretty(t.configuration,`- ${o}`,"REMOVED"))}),await n.xfs.writeFilePromise(r,`${JSON.stringify(i,null,2)}
`)}catch(i){s.reportError(e.MessageName.UNNAMED,`\u041D\u0435 \u0443\u0434\u0430\u0451\u0442\u0441\u044F \u0440\u0430\u0441\u043F\u043E\u0437\u043D\u0430\u0442\u044C \u0444\u0430\u0439\u043B tsconfig.json. \u0423\u0431\u0435\u0434\u0438\u0442\u0435\u0441\u044C, \u0447\u0442\u043E \u043E\u043D \u0441\u043E\u043E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u0444\u043E\u0440\u043C\u0430\u0442\u0443 json. \u041D\u0430\u043F\u0440\u0438\u043C\u0435\u0440 \u043D\u0435 \u0441\u043E\u0434\u0435\u0440\u0436\u0438\u0442 \u0437\u0430\u0432\u0435\u0440\u0448\u0430\u044E\u0449\u0435\u0439 \u0437\u0430\u043F\u044F\u0442\u043E\u0439. ${i.message}`)}})}}};return j(x);})();
return plugin;
}
};
